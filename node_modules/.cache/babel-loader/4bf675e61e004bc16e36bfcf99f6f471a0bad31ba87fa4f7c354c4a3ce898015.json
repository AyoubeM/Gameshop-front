{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useAuth.jsx\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { useEffect, useState } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { db } from \"../firebase\";\nconst useAuth = () => {\n  _s();\n  const {\n    user,\n    loading\n  } = AuthContext();\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      if (user) {\n        const userRef = doc(db, \"users\", user.uid);\n        const userSnap = await getDoc(userRef);\n        if (userSnap.exists()) {\n          const userData = userSnap.data();\n          setIsAdmin(userData.role === \"admin\");\n        }\n      } else {\n        setIsAdmin(false);\n      }\n    };\n    fetchUserRole();\n  }, [user]);\n  return {\n    user,\n    loading,\n    isAdmin\n  };\n};\n_s(useAuth, \"Zkrc/jvYeP+Lg60sj9ov6ALel5o=\");\nexport default useAuth;","map":{"version":3,"names":["doc","getDoc","useEffect","useState","AuthContext","db","useAuth","_s","user","loading","isAdmin","setIsAdmin","fetchUserRole","userRef","uid","userSnap","exists","userData","data","role"],"sources":["C:/Users/Berud/Desktop/Gameshop/Gameshopv2/frontend/Gameshop-Frontend/src/components/hooks/useAuth.jsx"],"sourcesContent":["// src/hooks/useAuth.jsx\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { db } from \"../firebase\";\r\n\r\nconst useAuth = () => {\r\n  const { user, loading } = AuthContext();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchUserRole = async () => {\r\n      if (user) {\r\n        const userRef = doc(db, \"users\", user.uid);\r\n        const userSnap = await getDoc(userRef);\r\n        if (userSnap.exists()) {\r\n          const userData = userSnap.data();\r\n          setIsAdmin(userData.role === \"admin\");\r\n        }\r\n      } else {\r\n        setIsAdmin(false);\r\n      }\r\n    };\r\n\r\n    fetchUserRole();\r\n  }, [user]);\r\n\r\n  return { user, loading, isAdmin };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA;AACA,SAASA,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,EAAE,QAAQ,aAAa;AAEhC,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGL,WAAW,CAAC,CAAC;EACvC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACd,MAAMU,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAIJ,IAAI,EAAE;QACR,MAAMK,OAAO,GAAGb,GAAG,CAACK,EAAE,EAAE,OAAO,EAAEG,IAAI,CAACM,GAAG,CAAC;QAC1C,MAAMC,QAAQ,GAAG,MAAMd,MAAM,CAACY,OAAO,CAAC;QACtC,IAAIE,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCP,UAAU,CAACM,QAAQ,CAACE,IAAI,KAAK,OAAO,CAAC;QACvC;MACF,CAAC,MAAM;QACLR,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACJ,IAAI,CAAC,CAAC;EAEV,OAAO;IAAEA,IAAI;IAAEC,OAAO;IAAEC;EAAQ,CAAC;AACnC,CAAC;AAACH,EAAA,CAtBID,OAAO;AAwBb,eAAeA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}