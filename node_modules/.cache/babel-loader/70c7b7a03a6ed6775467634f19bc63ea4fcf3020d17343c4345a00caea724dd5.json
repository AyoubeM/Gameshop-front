{"ast":null,"code":"var _s = $RefreshSig$();\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { db } from \"../firebase\";\nconst useAuth = () => {\n  _s();\n  const {\n    user,\n    loading\n  } = useContext(AuthContext);\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      if (user && user.uid) {\n        const userRef = doc(db, \"users\", user.uid);\n        const userSnap = await getDoc(userRef);\n        if (userSnap.exists()) {\n          const userData = userSnap.data();\n          setIsAdmin(userData.role === \"admin\");\n        }\n      } else {\n        setIsAdmin(false);\n      }\n    };\n    fetchUserRole();\n  }, [user]);\n  return {\n    user,\n    loading,\n    isAdmin\n  };\n};\n_s(useAuth, \"clnniglbXvMcKrqu3Gh5dng+MBQ=\");\nexport default useAuth;","map":{"version":3,"names":["doc","getDoc","useContext","useEffect","useState","AuthContext","db","useAuth","_s","user","loading","isAdmin","setIsAdmin","fetchUserRole","uid","userRef","userSnap","exists","userData","data","role"],"sources":["C:/Users/Berud/Desktop/frontend/src/components/hooks/useAuth.jsx"],"sourcesContent":["import { doc, getDoc } from \"firebase/firestore\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { db } from \"../firebase\";\r\n\r\nconst useAuth = () => {\r\n  const { user, loading } = useContext(AuthContext);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchUserRole = async () => {\r\n      if (user && user.uid) {\r\n        const userRef = doc(db, \"users\", user.uid);\r\n        const userSnap = await getDoc(userRef);\r\n        if (userSnap.exists()) {\r\n          const userData = userSnap.data();\r\n          setIsAdmin(userData.role === \"admin\");\r\n        }\r\n      } else {\r\n        setIsAdmin(false);\r\n      }\r\n    };\r\n\r\n    fetchUserRole();\r\n  }, [user]);\r\n\r\n  return { user, loading, isAdmin };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA,SAASA,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,EAAE,QAAQ,aAAa;AAEhC,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGR,UAAU,CAACG,WAAW,CAAC;EACjD,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACd,MAAMU,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAIJ,IAAI,IAAIA,IAAI,CAACK,GAAG,EAAE;QACpB,MAAMC,OAAO,GAAGf,GAAG,CAACM,EAAE,EAAE,OAAO,EAAEG,IAAI,CAACK,GAAG,CAAC;QAC1C,MAAME,QAAQ,GAAG,MAAMf,MAAM,CAACc,OAAO,CAAC;QACtC,IAAIC,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCP,UAAU,CAACM,QAAQ,CAACE,IAAI,KAAK,OAAO,CAAC;QACvC;MACF,CAAC,MAAM;QACLR,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACJ,IAAI,CAAC,CAAC;EAEV,OAAO;IAAEA,IAAI;IAAEC,OAAO;IAAEC;EAAQ,CAAC;AACnC,CAAC;AAACH,EAAA,CAtBID,OAAO;AAwBb,eAAeA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}