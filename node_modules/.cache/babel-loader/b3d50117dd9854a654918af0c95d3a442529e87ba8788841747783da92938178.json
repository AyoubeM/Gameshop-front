{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useAuth.jsx\nimport { useState, useEffect, useContext } from \"react\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { doc, getDoc } from \"firebase/firestore\";\nimport { auth, db } from \"../firebase\";\nimport { AuthContext } from \"../context/AuthContext\";\nconst useAuth = () => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuthContext();\n  const [isAdmin, setIsAdmin] = useState(false);\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      if (user) {\n        const userRef = doc(db, \"users\", user.uid);\n        const userSnap = await getDoc(userRef);\n        if (userSnap.exists()) {\n          const userData = userSnap.data();\n          setIsAdmin(userData.role === \"admin\");\n        }\n      } else {\n        setIsAdmin(false);\n      }\n    };\n    fetchUserRole();\n  }, [user]);\n  return {\n    user,\n    loading,\n    isAdmin\n  };\n};\n_s(useAuth, \"226Avj8DRGg7DN8hn7QKEO1bOdo=\", true);\nexport default useAuth;","map":{"version":3,"names":["useState","useEffect","useContext","onAuthStateChanged","doc","getDoc","auth","db","AuthContext","useAuth","_s","user","loading","useAuthContext","isAdmin","setIsAdmin","fetchUserRole","userRef","uid","userSnap","exists","userData","data","role"],"sources":["C:/Users/Berud/Desktop/Gameshop/Gameshopv2/frontend/Gameshop-Frontend/src/components/hooks/useAuth.jsx"],"sourcesContent":["// src/hooks/useAuth.jsx\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { auth, db } from \"../firebase\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst useAuth = () => {\r\n  const { user, loading } = useAuthContext();\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchUserRole = async () => {\r\n      if (user) {\r\n        const userRef = doc(db, \"users\", user.uid);\r\n        const userSnap = await getDoc(userRef);\r\n        if (userSnap.exists()) {\r\n          const userData = userSnap.data();\r\n          setIsAdmin(userData.role === \"admin\");\r\n        }\r\n      } else {\r\n        setIsAdmin(false);\r\n      }\r\n    };\r\n\r\n    fetchUserRole();\r\n  }, [user]);\r\n\r\n  return { user, loading, isAdmin };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACvD,SAASC,kBAAkB,QAAQ,eAAe;AAClD,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,IAAI,EAAEC,EAAE,QAAQ,aAAa;AACtC,SAASC,WAAW,QAAQ,wBAAwB;AAEpD,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGC,cAAc,CAAC,CAAC;EAC1C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,KAAK,CAAC;EAE7CC,SAAS,CAAC,MAAM;IACd,MAAMe,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAIL,IAAI,EAAE;QACR,MAAMM,OAAO,GAAGb,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEI,IAAI,CAACO,GAAG,CAAC;QAC1C,MAAMC,QAAQ,GAAG,MAAMd,MAAM,CAACY,OAAO,CAAC;QACtC,IAAIE,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrB,MAAMC,QAAQ,GAAGF,QAAQ,CAACG,IAAI,CAAC,CAAC;UAChCP,UAAU,CAACM,QAAQ,CAACE,IAAI,KAAK,OAAO,CAAC;QACvC;MACF,CAAC,MAAM;QACLR,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDC,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACL,IAAI,CAAC,CAAC;EAEV,OAAO;IAAEA,IAAI;IAAEC,OAAO;IAAEE;EAAQ,CAAC;AACnC,CAAC;AAACJ,EAAA,CAtBID,OAAO;AAwBb,eAAeA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}